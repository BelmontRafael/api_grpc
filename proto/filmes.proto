syntax = "proto3";

package filmes;

// Mensagens para Genero
message Genero {
    int32 id = 1;
    string nome = 2;
}

message GeneroResponse {
    Genero genero = 1;
}

message GenerosResponse {
    repeated Genero generos = 1;
}

message GetGeneroRequest {
    int32 id = 1;
}

message CreateGeneroRequest {
    string nome = 1;
}

message UpdateGeneroRequest {
    int32 id = 1;
    string nome = 2;
}

message DeleteRequest {
    int32 id = 1;
}

message Empty {}

// Serviço
service GeneroService {
    rpc ListarGeneros(Empty) returns (GenerosResponse);
    rpc ObterGenero(GetGeneroRequest) returns (GeneroResponse);
    rpc CriarGenero(CreateGeneroRequest) returns (GeneroResponse);
    rpc AtualizarGenero(UpdateGeneroRequest) returns (GeneroResponse);
    rpc DeletarGenero(DeleteRequest) returns (Empty);
}

// --- Serviço de Ator ---

// Mensagens para Ator
message Ator {
    int32 id = 1;
    string nome = 2;
    string data_nascimento = 3;
}

message AtorResponse {
    Ator ator = 1;
}

message AtoresResponse {
    repeated Ator atores = 1;
}

message GetAtorRequest {
    int32 id = 1;
}

message CreateAtorRequest {
    string nome = 1;
    string data_nascimento = 2;
}

message UpdateAtorRequest {
    int32 id = 1;
    string nome = 2;
    string data_nascimento = 3;
}

// Serviço
service AtorService {
    rpc ListarAtores(Empty) returns (AtoresResponse);
    rpc ObterAtor(GetAtorRequest) returns (AtorResponse);
    rpc CriarAtor(CreateAtorRequest) returns (AtorResponse);
    rpc AtualizarAtor(UpdateAtorRequest) returns (AtorResponse);
    rpc DeletarAtor(DeleteRequest) returns (Empty);
}

// --- Serviço de Filme ---

// Mensagens para Filme
message Filme {
    int32 id = 1;
    string nome = 2;
    int32 ano_lancamento = 3;
    string sinopse = 4;
    repeated Ator atores = 5;
    repeated Genero generos = 6;
}

message FilmeResponse {
    Filme filme = 1;
}

message FilmesResponse {
    repeated Filme filmes = 1;
}

message GetFilmeRequest {
    int32 id = 1;
}

message CreateFilmeRequest {
    string nome = 1;
    int32 ano_lancamento = 2;
    string sinopse = 3;
    repeated int32 atoresIds = 4;
    repeated int32 generosIds = 5;
}

message UpdateFilmeRequest {
    int32 id = 1;
    string nome = 2;
    int32 ano_lancamento = 3;
    string sinopse = 4;
}

message AdicionarAtorFilmeRequest {
    int32 filmeId = 1;
    int32 atorId = 2;
}

// Serviço
service FilmeService {
    rpc ListarFilmes(Empty) returns (FilmesResponse);
    rpc ObterFilme(GetFilmeRequest) returns (FilmeResponse);
    rpc CriarFilme(CreateFilmeRequest) returns (FilmeResponse);
    rpc AtualizarFilme(UpdateFilmeRequest) returns (FilmeResponse);
    rpc DeletarFilme(DeleteRequest) returns (Empty);
    rpc ListarAtoresDeFilme(GetFilmeRequest) returns (AtoresResponse);
    rpc AdicionarAtorEmFilme(AdicionarAtorFilmeRequest) returns (FilmeResponse);
}